
<head> </head>
<style type="text/css">
.shadow {
  box-shadow: 0 8px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}
td {
  font-size: 80%;
}

th {
  font-size: 85%;
}

.calign{
    text-align:center;

}
  .ralign{
    text-align:right;

  }
.mdwrap{
	width:6%
}

.smwrap1{
	width:15%
}

.smwrap2{
  width:18%
}

.smwrap3{
  width:20%
}

.cred{
    color:red;
  }
#mthltable td {
	 font-size: 75%;
	 padding: 4 !important;
	 margin: 4 !important;
     }

     #mthltable th {
	 font-size: 85%;
     }

     .card-view .title {
	 font-weight: bold;
	 display: inline-block;
	 min-width: 30%;
	 text-align: left !important;
     }

     #mthltable tbody {
	 display:block;
	 
	 overflow-y:scroll;
     }
     #mthltable thead,#mthltable tbody tr {
	 display:table;
	 width:100%;
	 table-layout:fixed;
     }
     #mthltable thead {
	 width: calc( 99.01% );
     }
</style>
<body>
  <div class="container-fluid "><center>
    {% if btype == '3' %}
    <h4> <b>Cash Budget Report </b> </h4></center>
    {% elif btype == '5' %}
    <h4> <b>Net Profit Budget Report </b> </h4></center>
    {% else %}
    <h4> <b>Gross Profit Budget Report </b> </h4></center>
    {% endif %}

    <div class = "panel">
        <div ><center>
             <strong id="budgetdetails"> {{budgetdetail}} </strong> </center>
        </div>
        <div class="panel-body">
        {%if btype == '3'%}
        <div class="table-responsive">
          <table id="mthltable" class="shadow table table-bordered table-condensed ">
            <thead class="bg-primary">
			    <tr>
			      <th  class="smwrap text-center">{% trans %}Particulars {% endtrans %} </th>
			      <th  class="taxwrap text-center sgstfield">{% trans %}Budgeted{% endtrans %}</th>
			      <th  class="taxwrap text-center sgstfield">{% trans %}Actuals{% endtrans %}</th>
			      <th  class="taxwrap text-center igstfield">{% trans %}Variance{% endtrans %}</th>
                  <th  class="taxwrap text-center igstfield">{% trans %}Variance(%){% endtrans %}</th>
			    </tr>
			  </thead>
            <tbody>
                <tr>
                    <td> Opening
                    </td>
                    <td style="text-align:right"> {{gkresult["opening"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["opening"]}}
                    </td>
                    <td style="text-align:right"> -
                    </td>
                    <td style="text-align:right"> -
                    </td>
                </tr>
                {# <tr>
                    <td> Total
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr> #}
                <tr>
                    <td> Inflow 
                    <br><div style="text-align:right">
                        {% for i in gkresult["inflow"]%}
                            {{i["accountname"]}}<br>
                        {% endfor %}
                        </div>
                    </td>
                    
                    <td style="text-align:right"><br>
                        {% for i in gkresult["inflow"]%}
                            {{i["budget"]}}<br>
                        {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                        {% for i in gkresult["inflow"]%}
                            {{i["actual"]}}<br>
                        {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                        {% for i in gkresult["inflow"]%}
                            {{i["var"]}}<br>
                        {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                        {% for i in gkresult["inflow"]%}
                            {{i["varinpercent"]}} %<br>   
                        {% endfor %}
                    </td>

                </tr>
                <tr>
                    <td> Total
                    </td>
                    <td style="text-align:right"> {{gkresult["budgetin"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["actualin"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["varin"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["varpercentin"]}} %
                    </td>
                </tr>
                <tr>
                    <td> Outflow
                    <br><div style="text-align:right">
                        {% for i in gkresult["outflow"]%}
                            {{i["accountname"]}}<br>
                        {% endfor %}
                        </div>
                    </td>
                    
                    <td style="text-align:right"><br>
                        {% for i in gkresult["outflow"]%}
                            {{i["budget"]}}<br>
                        {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                        {% for i in gkresult["outflow"]%}
                            {{i["actual"]}}<br>
                        {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                        {% for i in gkresult["outflow"]%}
                            {{i["var"]}}<br>
                        {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                        {% for i in gkresult["outflow"]%}
                            {{i["varinpercent"]}} %<br>
                        {% endfor %}
                    </td>
                </tr>
                <tr >
                    <td> Total
                    </td>
                    <td style="text-align:right"> {{gkresult["budgetout"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["actualout"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["varout"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["varpercentout"]}} %
                    </td>
                </tr>
                <tr>
                    <td> Closing
                    </td>
                    <td style="text-align:right"> {{gkresult["budgetclosing"]}}
                    </td>
                    <td style="text-align:right"> {{gkresult["actualclosing"]}}
                    </td>
                    <td style="text-align:right"> -
                    </td>
                    <td style="text-align:right"> -
                    </td>
                </tr>
            </tbody>
          </table>
        </div>    
        {# <div >
            <h><b>Total Opening Balance : </b></h>{{gkresult["totalopeningbal"]}}
        </div>
        <div class="table-responsive">
          <table id="mthltable" class="shadow table table-bordered table-condensed ">
            <thead class="bg-primary">
			    <tr>
			      <th  class="smwrap text-center">{% trans %}Particulars {% endtrans %} </th>
			      <th  class="taxwrap text-center sgstfield">{% trans %}Cash InFlow{% endtrans %}</th>
			      <th  class="taxwrap text-center sgstfield">{% trans %}Cash OutFlow{% endtrans %}</th>
			      <th  class="taxwrap text-center igstfield">{% trans %}Balance{% endtrans %}</th>
			    </tr>
			  </thead>
            <tbody>
                <tr >
                    <td> Budget Amount</td>
                    <td style="text-align:right"> {{gkresult["budgetIn"]}} </td>
                    <td style="text-align:right"> {{gkresult["budgetOut"]}} </td>
                    <td style="text-align:right"> {{gkresult["budgetBal"]}} </td>   
                </tr>
                <tr >
                    <td><h> Actuals </h> <br>
                    <div style="text-align:right">
                    {% for acc in gkresult["accData"] %}
                        {{acc["accountname"]}} <br>
                    {% endfor %}
                    </div>
                    </td>
                    <td style="text-align:right"><br>
                    {% for acc in gkresult["accData"] %}
                        {{acc["accDr"]}} <br>
                    {% endfor %}
                     </td>
                    <td style="text-align:right"><br>
                    {% for acc in gkresult["accData"] %}
                        {{acc["accCr"]}} <br>
                    {% endfor %}
                    </td>
                    <td style="text-align:right"><br>
                    {% for acc in gkresult["accData"] %}
                        {{acc["accBal"]}} <br>
                    {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td style="text-align:left">Total</td>
                    <td style="text-align:right"> {{gkresult["totalDr"]}} </td>
                    <td style="text-align:right"> {{gkresult["totalCr"]}} </td>
                    <td style="text-align:right"> {{gkresult["budgetclosingbal"]}} </td> 
                </tr>
                <tr>
                    <td>Variance</td>
                    <td style="text-align:right"> {{gkresult["varDr"]}} </td>
                    <td style="text-align:right"> {{gkresult["varCr"]}} </td>
                    <td style="text-align:right"> {{gkresult["varBal"]}} </td> 
                </tr>
            </tbody>
            </table>
            <div >
            <h><b>Budget Closing Balance : </b></h>{{gkresult["budgetclosingbal"]}} #}
            {%elif btype== '5'%}
            <div>
                <h><b>Total Gross Profit: </b></h>{{gkresult["grossprofit"]}}
            </div>
            {# <div>
                  <h><b>Total Previous Expense: </b></h>{{gkresult["totalpreviousbal"]}}
            </div> #}
            <div class="table-responsive">
                <table id="mthltable" class="shadow table table-bordered table-condensed tabledesign">
                  <thead class="bg-primary">
                <tr>
                  <th  class="smwrap text-center">{% trans %}Particulars {% endtrans %} </th>
                  <th  class="taxwrap text-center sgstfield">{% trans %}Budgeted Expense{% endtrans %}</th>
                  <th  class="taxwrap text-center sgstfield">{% trans %}Actual Expense{% endtrans %}</th>
                  <th  class="taxwrap text-center igstfield">{% trans %}Variance{% endtrans %}</th>
                  {# <th  class="taxwrap text-center igstfield">{% trans %}Budgeted Balance{% endtrans %}</th>
                  <th  class="taxwrap text-center igstfield">{% trans %}Actual Balance{% endtrans %}</th> #}
                </tr>
                  </thead>
                  <tbody>
                <tr>
                    <td>
                    <div style="text-align:left">
                    {% for record in gkresult["accountdata"] %}
                      {{record["accountname"]}} <br>
                      {% endfor %}
                      </div>
                    </td>
                    <td style="text-align:right">
                    {% for record in gkresult["accountdata"] %}
                      {{record["budgetamount"]}}<br>
                      {% endfor %}
                    </td>
                    <td style="text-align:right">
                    {% for record in gkresult["accountdata"] %}
                      {{record["actualamount"]}}<br>
                      {% endfor %}
                    </td>
                    <td style="text-align:right"> 
                    {% for record in gkresult["accountdata"] %}
                      {{record["accvariance"]}}<br>
                      {% endfor %}
                    </td>
                    {# <td style="text-align:right">
                    {% for record in gkresult["accountdata"] %}
                      {{record["budgetedbal"]}}<br>
                      {% endfor %}
                    </td>
                    <td style="text-align:right">
                    {% for record in gkresult["accountdata"] %}
                      {{record["actualbal"]}}<br> 
                      {% endfor %}
                    </td> #}
                </tr>
                <tr>
                    <td >
                    Total Expenses
                    </td>
                    <td style="text-align:right">
                        {{gkresult["totalbudget"]}}
                    </td>
                    <td style="text-align:right">
                        {{gkresult["totalactual"]}}
                    </td>
                    <td style="text-align:right">
                        {{gkresult["totalvariance"]}}
                    </td>
                    {# <td style="text-align:right">
                        {{gkresult["totalbudgetedbal"]}}
                    </td>
                    <td style="text-align:right">
                        {{gkresult["totalactualbal"]}}
                    </td> #}
                </tr>
                <tr >
                        <td>
                            Net Profit
                        </td>
                        <td style="text-align:right">
                            {{gkresult["budgetnet"]}}
                        </td>
                        <td style="text-align:right">
                            {{gkresult["actualnet"]}}
                        </td>
                        <td style="text-align:right">
                            {{gkresult["varnet"]}}
                        </td>
                </tr>
                  </tbody>
                </table>
                <h><b>Total Closing Expense: </b></h>{{gkresult["totalactual"]}} <br>
            </div>
            {% else %}
            <div>
                  <h><b>Total Opening Balance: </b></h>{{gkresult["openingbal"]}}
            </div>
            <div class="table-responsive">
                <table id="mthltable" class="shadow table table-bordered table-condensed tabledesign">
                      <thead class="bg-primary">
                    <tr>
                      <th  class="smwrap text-center">{% trans %}Particulars {% endtrans %} </th>
                      <th  class="taxwrap text-center sgstfield">{% trans %}Budgeted{% endtrans %}</th>
                      <th  class="taxwrap text-center sgstfield">{% trans %}Actual{% endtrans %}</th>
                      <th  class="taxwrap text-center igstfield">{% trans %}Variance{% endtrans %}</th>
                    </tr>
                      </thead>
                      <body >
                        <tr>
                            <td> Purchases <br>
                                <div style="text-align:right">
                                    {% for record in gkresult["expensedata"] %}
                                        {{record["accountname"]}} <br>
                                    {% endfor %}
                                </div>
                            </td>
                            <td style="text-align:right">
                                <br>
                                    {% for record in gkresult["expensedata"] %}
                                        {{record["budget"]}} <br>
                                    {% endfor %}
                            <td style="text-align:right">
                                <br>
                                    {% for record in gkresult["expensedata"] %}
                                        {{record["actual"]}} <br>
                                    {% endfor %}
                            </td>
                            <td style="text-align:right">
                                <br>
                                    {% for record in gkresult["expensedata"] %}
                                        {{record["var"]}} <br>
                                    {% endfor %}
                            </td>
                        </tr>

                        <tr style="text-align:right">
                            <td>
                              Total
                            </td>

                            <td>
                              {{gkresult["budgetexpense"]}}
                            </td>

                            <td>
                              {{gkresult["actualexpense"]}}
                            </td>

                            <td>
                              {{gkresult["varexpense"]}}
                            </td>
                        </tr>

                        <tr>
                            <td> Sales <br>
                                <div style="text-align:right">
                                    {% for record in gkresult["incomedata"] %}
                                        {{record["accountname"]}} <br>
                                    {% endfor %}
                                </div>
                            </td>
                            <td style="text-align:right">
                                <br>
                                    {% for record in gkresult["incomedata"] %}
                                        {{record["budget"]}} <br>
                                    {% endfor %}
                            <td style="text-align:right">
                                <br>
                                    {% for record in gkresult["incomedata"] %}
                                        {{record["actual"]}} <br>
                                    {% endfor %}
                            </td>
                            <td style="text-align:right">
                                <br>
                                    {% for record in gkresult["incomedata"] %}
                                        {{record["var"]}} <br>
                                    {% endfor %}
                            </td>
                        </tr>

                        <tr style="text-align:right">
                            <td>
                              Total
                            </td>

                            <td>
                              {{gkresult["budgetincome"]}}
                            </td>

                            <td>
                              {{gkresult["actualincome"]}}
                            </td>

                            <td>
                              {{gkresult["varincome"]}}
                            </td>
                            
                        </tr>
                        <tr>
                            <td>
                              Profit
                            </td>

                            <td style="text-align:right">
                              {{gkresult["budgetprofit"]}}
                            </td>

                            <td style="text-align:right">
                              {{gkresult["actualprofit"]}}
                            </td>

                            <td style="text-align:right">
                              {{gkresult["varprofit"]}}
                            </td>
                        </tr>

                      </body>
                </table>
                <h><b>Total Closing Balance: </b></h>{{gkresult["closingbal"]}}
            </div>
            {# <div>
                  <h><b>Total Opening Balance: </b></h>{{gkresult["openingbal"]}}
            </div>
            <div class="table-responsive">
                <table id="mthltable" class="shadow table table-bordered table-condensed tabledesign">
                  <thead class="bg-primary">
                <tr>
                  <th  class="smwrap text-center">{% trans %}Particulars {% endtrans %} </th>
                  <th colspan = "2" class="taxwrap text-center sgstfield">{% trans %}Purchases{% endtrans %}</th>
                  <th colspan = "2" class="taxwrap text-center sgstfield">{% trans %}Sales{% endtrans %}</th>
                  <th  class="taxwrap text-center igstfield">{% trans %}Profit{% endtrans %}</th>
                </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td> Budget </td>
                      <td colspan = "2" style="text-align:right"> {{gkresult["budgetexpense"]}} </td>
                      <td colspan = "2" style="text-align:right"> {{gkresult["budgetincome"]}} </td>
                      <td style="text-align:right"> {{gkresult["budgetprofit"]}} </td>
                    </tr>
                    <tr>
                      <td> Actuals </td>
                      <td style="text-align:right">
                          {% for record in gkresult["expensedata"] %}
                            {{record["accountname"]}} <br>
                          {% endfor %}
                      </td> 
                      <td style="text-align:right">
                          {% for record in gkresult["expensedata"] %}
                            {{record["actual"]}} <br>
                          {% endfor %}
                      </td>
                      <td style="text-align:right"> 
                          {% for record in gkresult["incomedata"] %}
                            {{record["accountname"]}} <br>
                          {% endfor %}
                      </td >
                      <td style="text-align:right">
                          {% for record in gkresult["incomedata"] %}
                            {{record["actual"]}} <br>
                          {% endfor %}
                      </td>
                      <td>
                          
                      </td>
                    </tr>
                    <tr>
                        <td> Total </td>
                        <td colspan = "2" style="text-align:right"> {{gkresult["actualexpense"]}} </td>
                        <td colspan = "2" style="text-align:right"> {{gkresult["actualincome"]}} </td>
                        <td style="text-align:right"> {{gkresult["actualprofit"]}} </td>
                    </tr>
                    <tr>
                        <td> Variance </td> 
                        <td colspan = "2" style="text-align:right"> {{gkresult["varexpense"]}} </td>
                        <td colspan = "2" style="text-align:right"> {{gkresult["varincome"]}} </td>
                        <td style="text-align:right"> {{gkresult["varprofit"]}} </td>
                    </tr>
                  </tbody>
                </table>
                <h><b>Total Closing Balance: </b></h>{{gkresult["closingbal"]}}
            </div> #}
            {%endif%}
        </div>
        </div>
        </div>   
      </div>
      <center>
        <button type="button" class="btn btn-sm btn-danger " id="back" name="back" accesskey="b"><i class="fa fa-arrow-left" aria-hidden="true"></i> {% trans %}<u>B</u>ack{% endtrans %}</button>
        <button class="btn btn-sm btn-primary" type="button"  id="spreadsheet" accesskey="x">{% trans %}<i class="fa fa-file-excel-o" aria-hidden="true"></i> E<u>x</u>port to Spreadsheet{% endtrans %}</button>    
        <button type="button" class="btn btn-sm btn-info" id="printversion" accesskey="t">{% trans %}<i class="fa fa-print" aria-hidden="true"></i> View Prin<u>t</u>able Version{% endtrans %}</button>      
      </center>
      
    </div>
    <input type="hidden" id="btype" value="{{btype }}">
    <input type="hidden" id="budid" value="{{ budid }}">
    <input type="hidden" id="menuflag" value="{{ menuflag }}">
  <script type="text/javascript" src="{{request.static_url('gkwebapp:static/js/budgetreport.js')}}"></script>
</body> 