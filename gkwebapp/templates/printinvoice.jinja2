
<html>
<head>
  <meta charset="utf-8">
  <title>GNUKhata</title>
  <style>
   @page {
       size: 21cm 29.7cm;
       margin: 10mm 3mm 15mm 10mm; /* change the margins as you want them to be. */
   }
   td {
       font-size: 65%;
       padding: 2px !important;
       margin:  0 !important;
   }
   body {
       background-image: none;
   }
   th {
       font-size: 75%;
       padding: 3px !important;
       margin:  0 !important;
   }
   table { page-break-inside:auto }
   tr    { page-break-inside:avoid; page-break-after:auto }
   thead { display: table-header-group; }
   tfoot { display: table-footer-group; }
   .borderdiv {
       border-left-style:solid;
       border-width: 1px;
   }
   .nopadding {
       padding: 0 !important;
       margin: 0 !important;
   }
   div {
       font-size:95%;
   }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row text-center">
      <h5><u>INVOICE</u></h5>
    </div>
    <div class="row">

      <div class="col-xs-6 nopadding">
        <div class="row">
          <div class="col-xs-6" id="logo_div">

            <div class="img-thumbnail img-circle ">
              <div style="position: relative; padding: 0; cursor: pointer;" type="file">
		<img class="img-circle"  style="width: 100px; height: 100px;" id="imgbox">
              </div>
            </div>
          </div>
          <div class="col-xs-6 nopaddng">

            <h3>{{org["orgname"]}}</h3>
            {% if org["orgaddr"]!='' %}
              {{org["orgaddr"]}},
            {% endif %}
            {% if org["orgcity"]!='' %}
            </br>{{org["orgcity"]}}
	    {% endif %}
	    {% if org["orgpincode"] %}
	      - {{org["orgpincode"]}},
            {% endif %}
            {% if org["orgstate"]!='' %}
            </br>{{org["orgstate"]}}.
            {% endif %}
            {% if org["orgtelno"]!='' %}
            </br>Contact No.: {{org["orgtelno"]}}
            {% endif %}
            {% if org["orgemail"]!='' %}
              <br>Email : {{org["orgemail"]}}
            {% endif %}
            {% if org["orgfax"] %}
              <br>Fax : {{org["orgfax"]}}
            {% endif %}
            {% if org["orgwebsite"]!='' %}
              <br>Website : {{org["orgwebsite"]}}
            {% endif %}
            <br>
	    <br>
          </div>
	  
	</div>
      </div>
    </div>
    <hr style="border-color:grey;margin-top:0px; margin-bottom:0px;">
    <br>
      <div class="row">
      <table class="table table-bordered table-condensed">
	<thead>
	  <th>Details of Invoice</th>
	  <th>Details of Receiver | Billed To</th>
	  <th>Details of Invoice</th>
	</thead>
	<tbody>
	  <tr>
	  <td>
	    <div class="form-group form-inline col-xs-12 nopadding">
	      {% if gkresult["dcno"] %}
		<label class="normal" for="instrumentno">{% trans %}Delivery Note No{% endtrans %} : </label>
		{{gkresult["dcno"]}}
	      {% endif %}
	    </div>
	    <div class="form-group form-inline col-xs-12 nopadding">
	      <label class="normal"for="bankname">{% trans %}Invoice No.{% endtrans %} : </label>
	      {{ gkresult["invoiceno"] }}
	    </div>
	    <div class="form-group form-inline col-xs-12 nopadding">
	      <label for="instrument_date" class="normal">{% trans %}Invoice Date{% endtrans %} : </label>
	      {{ gkresult["invoicedate"] }}
	    </div>
	    <div class="form-group form-inline col-xs-12 nopadding">
	      <label>
		{% if gkstatus=="in" %}
		  {% trans %}State of Destination{% endtrans %} :
		{% else %}
		  {% trans %}State of Origin{% endtrans %} :
		{% endif %}
	      </label>
	      {% if gkresult["inoutflag"] == 15 %}{{ gkresult["sourcestate"] }}{% endif %}{% if gkresult["inoutflag"] == 9 %}{{ gkresult["destinationstate"] }}{% endif %}
	    </div>
	    <div class="form-group form-inline col-xs-12 nopadding">
	      <label for="stcode">{% trans %}State Code{% endtrans %} : </label>
	      {% if gkresult["inoutflag"] == 15 %}{{ gkresult["sourcestatecode"] }}{% endif %}{% if gkresult["inoutflag"] == 9 %}{{ gkresult["taxstatecode"] }}{% endif %}
	    </div>
	    {% if gkresult["inoutflag"] == 15 %}
	      <div class="form-group form-inline col-xs-12 nopadding">
		<label for="invoice_issuer_name">{% trans %}Issuer's Name{% endtrans %} : </label>{{ gkresult["issuername"] }}
	      </div>
	      <div class="form-group form-inline col-xs-12 nopadding">
		<label for="invoice_issuer_designation">{% trans %}Designation{% endtrans %} : </label>
		{{ gkresult["designation"] }}
	      </div>
	    {% endif %}
	  </td>
	  <td>
	    <div class="form-group form-inline col-xs-12 nopadding">
	      <label for="invoice_customer">
		{% if gkresult["inoutflag"] == 9 %}
		  {% trans %}Supplier{% endtrans %} : 
		{% else %}
		  {% trans %}Customer{% endtrans %} : 
		{% endif %}
	      </label>
	      {{ gkresult["custSupDetails"]["custname"] }}
	    </div>
	    {% if gkresult["taxflag"] == 22 %}
	      <div class="form-group form-inline col-xs-12 nopadding">
		<label for="tin" class=" col-form-label col-form-label-sm" id="transmode">{% trans %}TIN{% endtrans %} : </label>
		{{ gkresult["custSupDetails"]["custtin"] }}
	      </div>
	      <input type="text"  id="taxapplicable" value="22" accesskey="" hidden>
	    {% endif %}
	    {% if gkresult["taxflag"] == 7 %}
	      <div class="form-group form-inline col-xs-12 nopadding">
		<label for="gstin" class=" col-form-label col-form-label-sm" id="transmode">{% trans %}GSTIN{% endtrans %} : </label>
		{{ gkresult["custSupDetails"]["custgstin"] }}
	      </div>
	      <input type="text"  id="taxapplicable" value="7" accesskey="" hidden>
	    {% endif %}
	    <div class="form-group form-inline col-xs-12 nopadding">
	      <label>
		{% if gkresult["inoutflag"] == 9 %}
		  {% trans %}Supplier State{% endtrans %} :
		{% else %}
		  {% trans %}Customer State{% endtrans %} :
		{% endif %}
	      </label>
	      {% if gkresult["inoutflag"] == 9 %}{{ gkresult["sourcestate"] }}{% endif %}{% if gkresult["inoutflag"] == 15 %}{{ gkresult["destinationstate"] }}{% endif %}
	    </div>
	    <div class="form-inline form-group col-xs-12 nopadding">
	      <label for="stcode">{% trans %}State Code{% endtrans %} : </label>
	      {% if gkresult["inoutflag"] == 15 %}{{ gkresult["sourcestatecode"] }}{% endif %}{% if gkresult["inoutflag"] == 9 %}{{ gkresult["taxstatecode"] }}{% endif %}
	    </div>
	    <div class="form-inline form-group col-xs-12 nopadding">
	      <label>
		{% if gkresult["inoutflag"] == 9 %}
		  {% trans %}Supplier Address{% endtrans %} : 
		{% else %}
		  {% trans %}Customer Address{% endtrans %} :
		{% endif %}
	      </label>
	      {{ gkresult["custSupDetails"]["custaddr"] }}
	    </div>
	  </td>
	  <td>
	    <div class="form-inline form-group col-xs-12 nopadding">
	      <label for="consignee" class=" col-form-label col-form-label-sm" id="consigneelbl">{% trans %}Name{% endtrans %} : </label>
	      {% if gkresult["consignee"]["consigneename"] %}{{ gkresult["consignee"]["consigneename"] }}{% else %}N/A{% endif %}
	    </div>
	    {% if gkresult["taxflag"] == 22 %}
	      <div class="form-inline form-group col-xs-12 nopadding">
		<label for="tinconsignee" class=" col-form-label col-form-label-sm" id="transmode">{% trans %}TIN{% endtrans %} :</label>
		{% if gkresult["consignee"]["tinconsignee"] %}{{ gkresult["consignee"]["tinconsignee"] }}{% else %}N/A{% endif %}
	      </div>
	    {% endif %}
	    {% if gkresult["taxflag"] == 7 %}
	      <div class="form-inline form-group col-xs-12 nopadding">
		<label for="gstinconsignee" class=" col-form-label col-form-label-sm" id="transmode">{% trans %}GSTIN{% endtrans %} :</label>
		{% if gkresult["consignee"]["tinconsignee"] %}{{ gkresult["consignee"]["tinconsignee"] }}{% else %}N/A{% endif %}
	      </div>
	    {% endif %}
	    <div class="form-inline form-group  col-xs-12 nopadding">
	      <label for="consigneeaddress" class=" col-form-label col-form-label-sm" id="consigneeaddress">{% trans %}Address :{% endtrans %}</label>
	      {% if gkresult["consignee"]["consigneeaddress"] %}{{ gkresult["consignee"]["consigneeaddress"] }}{% else %}N/A{% endif %}
	    </div>
	    <div class="form-inline form-group col-xs-12 nopadding">
	      <label for="orgstate" class="col-form-label col-form-label-sm">{% trans %}State{% endtrans %} :</label>
	      {% if gkresult["consignee"]["consigneestate"] %}{{ gkresult["consignee"]["consigneestate"] }}{% else %}N/A{% endif %}
	    </div>
	    <div class="form-inline form-group col-xs-12 nopadding">
	      <label for="stcode">{% trans %}State Code{% endtrans %} :</label>
	      {% if gkresult["consignee"]["consigneestatecode"] %}{{ gkresult["consignee"]["consigneestatecode"] }}{% else %}N/A{% endif %}
	    </div>
	  </td>
	  <tr>
	</tbody>
      </table>
</div>
    <form class="form-inline" >
      {% if gkresult["taxflag"] == 22 %}
	<div class="row">
	  <div class="col-xs-3">
	    <label for="tax applicable" name="taxflag">{% trans %}Tax Applicable{% endtrans %} :</label>
	    VAT
	  </div>
	</div>
	<div class="row">
	  <br>
	  <table id="invoice_product_table_vat" class=" table table-condensed table-bordered fixed-table fixed-tablepurchase">
	    <thead class="bg-primary">
	      <tr>
		<th class="mdvwrap text-center">{% trans %}Product{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Blled Quantity{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Free Quantity{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Rate{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Discount{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Taxable Value{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Tax Rate%{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Tax Amt{% endtrans %}</th>
		<th class="smvwrap text-center">{% trans %}Total{% endtrans %}</th>
	      </tr>
	    </thead>
	    <tbody>
	      {% for product in gkresult["invcontents"] %}
		<tr>
		  <td class="mdvwrap">
		    {{ gkresult["invcontents"][product]["proddesc"] }}
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["qty"] }} {{ gkresult["invcontents"][product]["uom"] }}
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["freeqty"] }} {{ gkresult["invcontents"][product]["uom"] }}
		  </td>

		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["priceperunit"] }}
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["discount"] }}
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["taxableamount"] }}
		  </td>
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["taxrate"] }}
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["taxamount"] }}
		  </td>
		  <td class="smvwrap text-right">
		    {{ gkresult["invcontents"][product]["totalAmount"] }}
		  </td>
		</tr>
	      {% endfor %}
	    </tbody>
	    <tfoot>
	      <tr>
		<td colspan="8" class="text-right">
		  {% trans %}Total{% endtrans %}
		</td>
		<!--  Total : ptotal       -->
		<td class="smvwrap text-right">
		  {{ gkresult["totaldiscount"] }}
		</td>
		<td class="smvwrap text-right">
		  {{ gkresult["totaltaxablevalue"] }}
		</td>
		<td class="smvwrap">
		  
		</td>
		<td class="smvwrap text-right">
		  {{ gkresult["totaltaxamt"] }}
		</td>
		<td class="smvwrap text-right">
		  {{ gkresult["invoicetotal"] }}
		</td>
	      </tr>
	    </tfoot>

	  </table>
	</div>
      {% else %}
	  <div class="row">
	    <div class="col-xs-3">
	      <label for="tax applicable" name="taxflag">{% trans %}Tax Applicable{% endtrans %} :</label>
	      GST
      </select>
	    </div>
	  </div>
	  <div class="row">
	    <div class="row col-xs-12" id="gstproducttable">
	      <div class="col-xs-10" style="overflow-x:scroll;">
		<div class="row">
		  <table id="invoice_product_table_gst_heading" class="nopadding table table-condensed table-bordered fixed-table fixed-tablepurchase" style="width:140%; max-width:140%;">
		    <thead class="bg-primary">
		      <tr>
			<th rowspan="2" class="mdwrap text-center">{% trans %}Product{% endtrans %}</th>
			<th rowspan="2" class="smwrap text-center">{% trans %}HSN Code/ ACS Code{% endtrans %}</th>
			<th rowspan="2" class="qtywrap text-center">{% trans %}Quantity{% endtrans %}</th>
			<th rowspan="2" class="qtywrap text-center">{% trans %}Free Quantity{% endtrans %}</th>
			<th rowspan="2" class="smwrap text-center">{% trans %}Rate{% endtrans %}</th>
			<th rowspan="2" class="smwrap text-center">{% trans %}Discount{% endtrans %}</th>
			<th rowspan="2" class="smwrap text-center">{% trans %}Taxable Value {% endtrans %}</th>
			{% if gkresult["taxname"]=='SGST' %}<th colspan="2" class="taxwrap text-center">{% trans %}CGST{% endtrans %}</th>{% endif %}
			{% if gkresult["taxname"]=='SGST' %}<th colspan="2" class="taxwrap text-center">{% trans %}SGST{% endtrans %}</th>{% endif %}
			{% if gkresult["taxname"]=='IGST' %}<th colspan="2" class="taxwrap text-center">{% trans %}IGST{% endtrans %}</th>{% endif %}
		      </tr>

		      <tr>
			{% if gkresult["taxname"]=='SGST' %}<th>Rate%</th>{% endif %}
			{% if gkresult["taxname"]=='SGST' %}<th>Amt</th>{% endif %}
			{% if gkresult["taxname"]=='SGST' %}<th>Rate%</th>{% endif %}
			{% if gkresult["taxname"]=='SGST' %}<th>Amt</th>{% endif %}
			{% if gkresult["taxname"]=='IGST' %}<th>Rate%</th>{% endif %}
			{% if gkresult["taxname"]=='IGST' %}<th>Amt</th>{% endif %}
		      </tr>
		    </thead>
		  </table>
		</div>
		<div class="row">
		  <table id="invoice_product_table_gst" class="nopadding table table-condensed table-bordered fixed-table fixed-tablepurchase" style="overflow-x:hidden;overflow-y:scroll;width:140%; max-width:140%;">
		    <tbody>
		      {% for product in gkresult["invcontents"] %}
			<tr>
			  <td class="mdwrap">
			    {{ gkresult["invcontents"][product]["proddesc"] }}
			  </td>
			  <td class="smwrap text-center">
			    {{ gkresult["invcontents"][product]["gscode"] }}
			  </td>
			  <td class="qtywrap text-right">
			    {{ gkresult["invcontents"][product]["qty"] }} {{ gkresult["invcontents"][product]["uom"] }}
			  </td>
			  <td class="qtywrap text-right">
			    {{ gkresult["invcontents"][product]["freeqty"] }} {{ gkresult["invcontents"][product]["uom"] }}
			  </td>

			  <td class="smwrap text-right">
			    {{ gkresult["invcontents"][product]["priceperunit"] }}
			  </td>
			  <td class="smwrap text-right">
			    {{ gkresult["invcontents"][product]["discount"] }}
			  </td>
			  <td class="smwrap text-right">
			    {{ gkresult["invcontents"][product]["taxableamount"] }}
			  </td>

			  {% if gkresult["invcontents"][product]["taxname"]=='SGST' %}<td class="taxcell text-right">{{ gkresult["invcontents"][product]["taxrate"] }}</td>{% endif %}
			  {% if gkresult["invcontents"][product]["taxname"]=='SGST' %}<td class="taxcell text-right">{{ gkresult["invcontents"][product]["taxamount"] }}</td>{% endif %}

			  {% if gkresult["invcontents"][product]["taxname"]=='SGST' %}<td class="taxcell text-right">{{ gkresult["invcontents"][product]["taxrate"] }}</td>{% endif %}
			  {% if gkresult["invcontents"][product]["taxname"]=='SGST' %}<td class="taxcell text-right">{{ gkresult["invcontents"][product]["taxamount"] }}</td>{% endif %}

			  {% if gkresult["invcontents"][product]["taxname"]=='IGST' %}<td class="taxcell text-right">{{ gkresult["invcontents"][product]["taxrate"] }}</td>{% endif %}
			  {% if gkresult["invcontents"][product]["taxname"]=='IGST' %}<td class="taxcell text-right">{{ gkresult["invcontents"][product]["taxamount"] }}</td>{% endif %}
			</tr>
		      {% endfor %}
		    </tbody>
		  </table>
		</div>
		<div class="row">
		  <table id="invoice_product_table_gst_tfoot" class=" table table-condensed table-bordered fixed-table fixed-tablepurchase" style="width:140%; max-width:140%;">
		    <tfoot>
		      <tr>
			<td colspan="5" class="text-right totalwrap" style="vertical-align:middle; font-size:75%">Total</td>
			<td class="text-right smwrap">{{ gkresult["totaldiscount"] }}</td>
			<td class="text-right smwrap">{{ gkresult["totaltaxablevalue"] }}</td>
			{% if gkresult["taxname"]=='SGST' %}<td colspan="2" class="text-right taxwrap">{{ gkresult["totaltaxamt"] }}</td>{% endif %}
			{% if gkresult["taxname"]=='SGST' %}<td colspan="2" class="text-right taxwrap">{{ gkresult["totaltaxamt"] }}</td>{% endif %}
			{% if gkresult["taxname"]=='IGST' %}<td colspan="2" class="text-right taxwrap">{{ gkresult["totaltaxamt"] }}</td>{% endif %}
		    </tfoot>
		  </table>
		</div>
	      </div>
	      <div class="col-xs-2 nopadding">
		<table id="invoice_product_table_total" class="table table-condensed table-bordered fixed-table fixed-tablepurchase">
		  <thead>
		    <tr>
		      <th style="line-height:380% !important; text-align:center;" class="col-xs-8">Total</th>
		    </tr>
		  </thead>
		  <tbody>
		    {% for product in gkresult["invcontents"] %}
		      <tr>
			<td class="col-xs-12 text-right">{{ gkresult["invcontents"][product]["totalAmount"] }}</td>
		      </tr>
		    {% endfor %}
		  </tbody>
		  <tfoot>
		    <td class="col-xs-12 text-right">
		      {{ gkresult["invoicetotal"] }}
		    </td>
		  </tfoot>
		</table>
	      </div>
	    </div>
	  </div>
      {% endif %}
	  <div class="row">
	    <div class="form-group form-inline col-xs-4 pull-right">
	      <label for="totalinvoicevalue" style="font-size:120%">{% trans %}Total Invoice Value{% endtrans %} :</label>
	      <label id="totalinvoicevalue">{{ gkresult["invoicetotal"] }}</label>
	    </div>
	  </div>
	  <div class="row">
	    <h4>Bank Details:</h4>
	    <div class="col-xs-6 nopadding">
	      <div class="row">
		<div class="form-group form-inline col-xs-6 nopadding">
		  <label for="accountno" class="col-xs-5">{% trans %}Account No.{% endtrans %} :</label>
		  {% if gkresult["bankdetails"]["accountno"] %}{{ gkresult["bankdetails"]["accountno"] }}{% else %}N/A{% endif %}
		</div>
		<div class="form-group form-inline col-xs-6 nopadding">
		  <label for="bankname" class="col-xs-5">{% trans %}Bank Name{% endtrans %} :</label>
		  {% if gkresult["bankdetails"]["bankname"] %}{{ gkresult["bankdetails"]["bankname"] }}{% else %}N/A{% endif %}
		</div>
	      </div>
	      <br>
	      <div class="row">
		<div class="form-group form-inline col-xs-6 nopadding">
		  <label for="branch" class="col-xs-5">{% trans %}Branch Name{% endtrans %} :</label>
		  {% if gkresult["bankdetails"]["branch"] %}{{ gkresult["bankdetails"]["branch"] }}{% else %}N/A{% endif %}
		</div>
		<div class="form-group form-inline col-xs-6 nopadding">
		  <label for="ifsc" class="col-xs-5">{% trans %}IFSC code{% endtrans %} :</label>
		  {% if gkresult["bankdetails"]["ifsc"] %}{{ gkresult["bankdetails"]["ifsc"] }}{% else %}N/A{% endif %}
		</div>
	      </div>
	    </div>
	    <div class="col-xs-6 borderdiv">
	      <div class="row">
		<div class="form-inline form-group col-xs-6 nopadding">
		  <label for="transportationmode" class="col-xs-5" id="transmode">{% trans %}Transportation Mode{% endtrans %} :</label>
		  {% if gkresult["transportationmode"] %}{{ gkresult["transportationmode"] }}{% else %}N/A{% endif %}
		</div>
		<div class="form-inline form-group col-xs-6 nopadding" id="vehiclenodiv" hidden>
		  <label for="inv" class="col-xs-5">{% trans %}Vehicle No.{% endtrans %} :</label>
		  {% if gkresult["vehicleno"] %}{{ gkresult["vehicleno"] }}{% else %}N/A{% endif %}
		</div>
	      </div>
	      <div class="row">
		<div class="form-group form-inline col-xs-6 nopadding">
		  <label for="supply_date" class="col-xs-5">{% trans %}Date of Supply{% endtrans %}:</label>
		  <div class="form-group col-xs-7 nopadding">
		    {% if gkresult["dateofsupply"] %}{{ gkresult["dateofsupply"] }}{% else %}N/A{% endif %}
  		  </div>
		</div>

		<div class="form-group form-inline col-xs-6 nopadding">
		  <label for="inv" class="col-xs-5">{% trans %}Reverse Charge{% endtrans %}:</label>
		  {% if gkresult["reversecharge"] %}{{ gkresult["reversecharge"] }}{% else %}N/A{% endif %}
		</div>
	      </div>
	    </div>
	  </div>
    </form>
    <br>
  <div class="row">
    <div class="col-xs-6">
      <strong><i>Thank you for your business!</i></strong>
    </div>
    <div class="text-right col-xs-6">
      <strong>{{issuername}}</strong>
      {% if designation!='' %}
      <i>({{designation}})</i>
      {% endif %}
    </div>
  </div>
  <span style="margin:auto; display:table;">
    <button type="button" class="btn btn-sm btn-danger hidden-print" id="invback" accesskey="b">{% trans %}<u>B</u>ack{% endtrans %}</button>
    <button type="button" class="btn btn-sm btn-info hidden-print" id="invprint" accesskey="t">{% trans %}Prin<u>t</u>{% endtrans %}</button>
  </span>
</div>
<script type="text/javascript" src="{{request.static_url('gkwebapp:static/js/printinvoice.js')}}"></script>
</body>
</html>
