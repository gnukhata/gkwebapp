<style>
.fixed-table td {
    font-size: 75%;
    padding: 4 !important;
    margin: 4 !important;
  }
.fixed-table tbody {
    display:block;
    height: calc(119vh - 38em);
    min-height: 125px;
    overflow-y:scroll;
}


.fixed-table thead ,.fixed-table tbody tr {
    display:table;
    width:100%;
    table-layout:fixed;
}
.fixed-table thead {
    width: calc( 100% - 0.75em )
}

	table.table-fixedheader {
    width: 100%;
  }
    table.table-fixedheader, table.table-fixedheader>thead, table.table-fixedheader>tbody, table.table-fixedheader>tfoot, table.table-fixedheader>thead>tr, table.table-fixedheader>tbody>tr, table.table-fixedheader>tfoot>tr, table.table-fixedheader>thead>tr>th, table.table-fixedheader>tbody>tr>td, table.table-fixedheader>tfoot>tr>td {
    display: block;
  }
  table.table-fixedheader>thead>tr:after, table.table-fixedheader>tbody>tr:after, table.table-fixedheader>tfoot>tr:after  {
    content:' ';
    display: block;
    visibility: hidden;
    clear: both;
  }
</style>
<body>
  <div class="container-fluid " style="padding: 1 !important; margin: 0 !important;">
    <div class="alert alert-success" id="success-alert"  aria-live="rude" role="alert" hidden>

      {% trans %}Category saved.{% endtrans %}
    </div>
    <div class="alert alert-danger" id="failure-alert"  aria-live="rude" role="alert" hidden>

      {% trans %}Something went wrong!{% endtrans %}
    </div>

    <div class="alert alert-danger" id="duplicate-alert"  aria-live="rude" role="alert" hidden>

      {% trans %}Category already exists!{% endtrans %}
    </div>

    <div class="panel shadow category_panel col-md-6">
      <div class="panel-body">

        <input type="hidden" id="catcount" value="{{categorycount}}">
        <div class="">

          {% if categorycount > 0 %}
          <div class="form-group row">
          <div id="oldparentdiv">

            <div>
              <label for="category_under">{% trans %}Parent Category:{% endtrans %}</label>
              <select class="form-control input-sm" id="category_under">
                <option value="" selected>{% trans %}Select Parent Category{% endtrans %}</option>
                {% for categories in gkresult %}
                <option value="{{categories['categorycode']}}">{{categories["categoryname"]}} ({{categories["subcount"]}})</option>
                {% endfor %}
              </select>
               <small id="txtareahelp" class="form-text text-muted">{% trans %}Press space to add new Parent Category.{% endtrans %}</small>
            </div>


            </div>
<div>



<div class="panel-body form-group row" id="new_parent_div1" hidden>



           <label for="category_name">{% trans %}New Parent Category:{% endtrans %}</label>
  <table id="new_parent_category_table" class="table-condensed ">
  <tbody>
                    <tr>
                      <td class="col-xs-8">
                        <input type="text" id="new_parent_name" class="form-control input-sm spec_name" placeholder="New Parent category Name">
                      </td>
                      <td class="col-xs-3">
                       <button class="btn form-control btn-primary btn-sm" id="parent_spec" data-toggle="modal" data-target="#addspecmodal" >{% trans %}Specs{% endtrans %}</button>
                      </td>
                      <td class="col-xs-3">
                       <button class="btn form-control btn-primary btn-sm" id="parent_tax" data-toggle="modal" data-target="#addtaxmodal"  >{% trans %}Tax{% endtrans %}</button>
                      </td>
                      <td class="col-xs-3">
                      <button class="btn form-control btn-primary btn-sm" id="parent_save"  >{% trans %}Save{% endtrans %}</button>
                      </td>
                    </tr>
                  </tbody>
                </table>


            </div>

</div>
          </div>

                   <div class="form-group row">

              <label for="category_name">{% trans %}Child Category:{% endtrans %}</label>

          </div>

          {% else %}

          <div class="form-group row" id="new_parent_div">
<div>


	<label for="category_name">{% trans %}New Parent Category :{% endtrans %}</label>
<table id="new_parent_category_table">
<tbody>
                  <tr>
                    <td class="col-xs-8">
                      <input type="text" id="new_parent_name" class="form-control input-sm spec_name" placeholder="New Parent category Name">
                    </td>
                    <td class="col-xs-3">
                      <button class="btn form-control btn-primary btn-sm" id="parent_spec" data-toggle="modal" data-target="#addspecmodal" >{% trans %}Specs{% endtrans %}</button>
                     </td>
                     <td class="col-xs-3">
                      <button class="btn form-control btn-primary btn-sm" id="parent_tax" data-toggle="modal" data-target="#addtaxmodal"  >{% trans %}Tax{% endtrans %}</button>
                      </td>
                    <td class="col-xs-3">
                      <button class="btn form-control btn-primary btn-sm" id="parent_save"  >{% trans %}Save{% endtrans %}</button>
                    </td>
                  </tr>
                </tbody>
              </table>



          </div>
          </div>
          <input type="text" id="category_under" value="" hidden>
          {% endif %}

        </div>
        <div class="row form-group">


            <div class="panel">
              <table id="child_category_table" class="table table-condensed table-bordered fixed-table">
                <thead class="bg-primary input-sm">
                  <tr>
                    <th class="col-xs-8">{% trans %}Child Category Name{% endtrans %}</th>
                    <th class="col-xs-3">{% trans %}Specifications{% endtrans %}</th>
                    <th class="col-xs-3">{% trans %}Tax{% endtrans %}</th>
                    <th class="col-xs-1"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="col-xs-8">
                      <input type="text" id="child_category_name" class="form-control input-sm spec_name" placeholder="Child category Name">
                    </td>
                    <td class="col-xs-3">
                     <button class="btn form-control btn-primary btn-sm child_spec_class" id="child_spec" data-toggle="modal" data-target="#addspecmodal" >{% trans %}Specs{% endtrans %}</button>

                    </td>
                    <td class="col-xs-3">
                     <button class="btn form-control btn-primary btn-sm child_tax_class" id="child_tax" data-toggle="modal" data-target="#addtaxmodal"   >{% trans %}Tax{% endtrans %}</button>
                    </td>
                    <td class="col-xs-1">
                      <a href="#" class="spec_del"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>
            <small id="spectotaxhelp" class="form-text text-muted">{% trans %}Press Esc key on specification type to switch to tax name.{% endtrans %}</small><br>
            <small id="navigation" class="form-text text-muted">{% trans %}Press 'Ctrl + <' and 'Ctrl + >' to navigate through fields of specification and tax.{% endtrans %}</small>


        </div>
      </div>

        <div id="addspecmodal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog ">
              <div class="modal-content">
            <div class="modal-header">
              <div class="modal-title">
                {% trans %}Specification{% endtrans %}
              </div>
            </div>
            <div class="modal-body">
              <div class="panel shadow">
                        <div class="panel-body">
                          <div class="row">
              <div class="form-group col-md-6">
                <div class="alert alert-danger" id="spec-blank-alert"  aria-live="rude" role="alert" hidden>

                  <label for="vno">{% trans %}Please enter specification name!{% endtrans %}</label>
                </div>
            </div>
          </div>
                          <div class="panel">
                  <table id="category_spec_table" class="table table-condensed table-bordered fixed-table">
                    <thead class="bg-primary input-sm">
                      <tr>
                        <th class="col-xs-8">{% trans %}Spec Name{% endtrans %}</th>
                        <th class="col-xs-3">{% trans %}Type{% endtrans %}</th>
                        <th class="col-xs-1"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="col-xs-8">
                          <input type="text" id="category_spec_name" class="form-control input-sm spec_name" placeholder="Spec Name" autofocus="focus">
                        </td>
                        <td class="col-xs-3">
                          <select id="category_spec_type" class="form-control input-sm spec_type" name="">
                            <option value="0">Text</option>
                            <option value="1">Number</option>
                            <option value="2">Date</option>
                            <option value="3">Option</option>
                          </select>
                        </td>
                        <td class="col-xs-1">
                          <a href="#" class="spec_del"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
</div>
              </div>
    </div>
    </div>

          <div class="panel-footer">
            <div class="container-fluid">
              <button class="btn btn-success btn-sm" id="done" data-toggle="tooltip" data-placement="top" >{% trans %}Done{% endtrans %}</button>

            </div>
          </div>
    </div>

    </div>

  </div>

  <div id="addtaxmodal" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
           <div class="modal-title">
          {% trans %}Tax{% endtrans %}
           </div>
          </div>
              <div class="modal-body">
                <div class="panel shadow">
                  <div class="alert alert-danger" id="tax-name-blank-alert"  aria-live="rude" role="alert" hidden>

                    {% trans %}Select tax name!{% endtrans %}
                  </div>
                  <div class="alert alert-danger" id="tax-rate-blank-alert"  aria-live="rude" role="alert" hidden>

                    {% trans %}Enter tax rate!{% endtrans %}
                  </div>
                  <div class="alert alert-danger" id="tax-duplicate-alert"  aria-live="rude" role="alert" hidden>

                    {% trans %}Duplicate Tax!{% endtrans %}
                  </div>

                  <div class="panel-body">
                    <div class="panel">
            <table id="category_tax_table" class="table table-condensed table-bordered fixed-table">
              <thead class="bg-primary input-sm">
                <tr>
                  <th class="col-xs-4 text-center">{% trans %}Tax Name{% endtrans %}</th>
                  <th class="col-xs-4 text-center">{% trans %}State{% endtrans %}</th>
                  <th class="col-xs-3 text-center">{% trans %}Rate%{% endtrans %}</th>
                  <th class="col-xs-1 text-center"></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="col-xs-4">
                    <select class="form-control input-sm tax_name">
                      <option value="" selected>Select Tax</option>
                      <option value="VAT">VAT</option>
                      <option value="CVAT">CVAT</option>
                    </select>
                  </td>
                  <td class="col-xs-4">
                    <select class="form-control input-sm tax_state" >
                      <option value="">None</option>
                      <option value="Andaman and Nicobar Islands" stateid="1">Andaman and Nicobar Islands</option>
                      <option value="Andhra Pradesh" stateid="2">Andhra Pradesh</option>
                      <option value="Arunachal Pradesh" stateid="3">Arunachal Pradesh</option>
                      <option value="Assam" stateid="4">Assam</option>
                      <option value="Bihar" stateid="5">Bihar</option>
                      <option value="Chandigarh" stateid="6">Chandigarh</option>
                      <option value="Chhattisgarh" stateid="7">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli" stateid="8">Dadra and Nagar Haveli</option>
                      <option value="Daman and Diu" stateid="9">Daman and Diu</option>
                      <option value="Delhi" stateid="10">Delhi</option>
                      <option value="Goa" stateid="11">Goa</option>
                      <option value="Gujarat" stateid="12">Gujarat</option>
                      <option value="Haryana" stateid="13">Haryana</option>
                      <option value="Himachal Pradesh" stateid="14">Himachal Pradesh</option>
                      <option value="Jammu and Kashmir" stateid="15">Jammu and Kashmir</option>
                      <option value="Jharkhand" stateid="16">Jharkhand</option>
                      <option value="Karnataka" stateid="17">Karnataka</option>
                      <option value="Kerala" stateid="19">Kerala</option>
                      <option value="Lakshadweep" stateid="20">Lakshadweep</option>
                      <option value="Madhya Pradesh" stateid="21">Madhya Pradesh</option>
                      <option value="Maharashtra" stateid="22">Maharashtra</option>
                      <option value="Manipur" stateid="23">Manipur</option>
                      <option value="Meghalaya" stateid="24">Meghalaya</option>
                      <option value="Mizoram" stateid="25">Mizoram</option>
                      <option value="Nagaland" stateid="26">Nagaland</option>
                      <option value="Odisha" stateid="29">Odisha</option>
                      <option value="Pondicherry" stateid="31">Pondicherry</option>
                      <option value="Punjab" stateid="32">Punjab</option>
                      <option value="Rajasthan" stateid="33">Rajasthan</option>
                      <option value="Sikkim" stateid="34">Sikkim</option>
                      <option value="Tamil Nadu" stateid="35">Tamil Nadu</option>
                      <option value="Telangana" stateid="36">Telangana</option>
                      <option value="Tripura" stateid="37">Tripura</option>
                      <option value="Uttar Pradesh" stateid="38">Uttar Pradesh</option>
                      <option value="Uttarakhand" stateid="39">Uttarakhand</option>
                      <option value="West Bengal" stateid="41">West Bengal</option>
                    </select>
                  </td>
                  <td class="col-xs-3">
                    <input class="form-control input-sm tax_rate text-right"  placeholder="Rate">
                  </td>
                  <td class="col-xs-1">

                  </td>
                </tr>
              </tbody>
            </table>
          </div>


                  </div>
                  </div>
                  </div>
          </div>
          </div>
          </div>


      <div class="panel-footer">
        <div class="container-fluid">
          <button class="btn btn-success btn-sm" id="category_save" data-toggle="tooltip" data-placement="top" title="{% trans %}Press Insert key anywhere on the current screen to save{% endtrans %}">{% trans %}Save{% endtrans %}</button>
          <button class="btn btn-warning btn-sm" id="category_reset">{% trans %}Reset{% endtrans %}</button>
        </div>
      </div>
    </div>
<div>
  <div style="padding-top:5px" class="col-md-6 shadow " id="spectbl" >
    <table class="table table-condensed fixed-table ">
      <thead class="table-fixedheader " style="font-size: 75%;">
        <tr>
          <th class="col-xs-6">#category_under </th>
        </tr>
        <tr class="thead  table-fixedheader" >
          <th class="col-xs-6  table-fixedheader">{% trans %}Specification Name{% endtrans %}</th>
          <th class="col-xs-6  table-fixedheader">{% trans %}Specification Type{% endtrans %}</th>

        </tr>

      </thead>
      <tbody>

      </tbody>
    </table>
    </div>

</div>
  </div>
</div>


<script type="text/javascript" src="{{request.static_url('gkwebapp:static/js/addcategory.js')}}"></script>
</body>
