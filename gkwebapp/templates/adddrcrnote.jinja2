<!DOCTYPE html>
 <title>{% trans %}GNUKhata{% endtrans %} | {% trans %}Debit & Credit Note{% endtrans %}</title>
 <link href="{{request.static_url('gkwebapp:static/css/drcrnote.css')}}" rel="stylesheet" type="text/css">
 <body style="padding-right:1%;">
   <div class="container-fluid" style="padding: 1 !important; margin: 0 !important;">
     <div class="alert alert-success" id="cr-success-alert"  aria-live="rude" role="alert" hidden>
       {% trans %}Credit Note saved.{% endtrans %}
     </div>
     <div class="alert alert-success" id="dr-success-alert"  aria-live="rude" role="alert" hidden>
       {% trans %}Debit Note saved.{% endtrans %}
     </div>
     <div class="alert alert-danger" id="failure-alert"  aria-live="rude" role="alert" hidden>
       {% trans %}Something went wrong!{% endtrans %}
     </div>
     <div class="alert alert-danger" id="cr-duplicate-alert"  aria-live="rude" role="alert" hidden>
       {% trans %}Duplicate credit note no.!{% endtrans %}
     </div>
     <div class="alert alert-danger" id="dr-duplicate-alert"  aria-live="rude" role="alert" hidden>
       {% trans %}Duplicate debit note no.!{% endtrans %}
     </div>
     <div class="panel drcr_panel shadow">
       <div class="panel-body">
	 <div class="container-fluid row">
	   <form class="form-horizontal" >
	     //
	     <div class="col-md-12">
	       <div class="col-md-4">
		 {% if drcrflag == "3" %}
		   <h4>{% trans %}Details of Credit Note: {% endtrans %}</h4>
		 {% else %}
		   <h4>{% trans %}Details of Debit Note: {% endtrans %}</h4>
		 {% endif %}
		 <div class="form-group form-inline" id="invoicerow">
		   <label class="col-sm-4 fsize" for="drcrnote_invoice">{% trans %}Invoice No.{% endtrans %} :</label>
		   <select class="form-control input-sm col-sm-8"  id="drcrnote_invoice">
                     <option value="" invoiceno = "" selected>None</option>
                     {% for invoice in invoices %}
                       {% if drcrflag=="3" %}
			 <option value="{{invoice['invid']}}" invoiceno = "{{invoice["invoiceno"]}}" invoicedate="{{invoice['invoicedate']}}">{{invoice["invoiceno"]}}, {{invoice['invoicedate']}}, {{invoice["custname"]}}</option>
		       {% else %}
			 <option value="{{invoice['invid']}}" invoiceno = "{{invoice["invoiceno"]}}" invoicedate="{{invoice['invoicedate']}}">{{invoice["invoiceno"]}}, {{invoice['invoicedate']}}, {{invoice["custname"]}}</option>
                       {% endif %}
                     {% endfor %}
                   </select>
		 </div>
		 <div class="form-group form-inline">
		   {% if drcrflag == "3" %}
		     <label class="col-sm-4 fsize" for="crnote_no">{% trans %}Cr Note No.{% endtrans %} :</label>
		   {% else %}
		     <label class="col-sm-4 fsize" for="drnote_no">{% trans %}Dr Note No.{% endtrans %} :</label>
		   {% endif %}
		   <input class="form-control input-sm col-sm-8" size="15" id="drcrnote_no" >
		 </div>
		 <div class="form-group form-inline">
		   {% if drcrflag == "3" %}
		     <label for="crnote_date" class="col-sm-4 fsize">{% trans %}Cr Note Date{% endtrans %} :</label>
		   {% else %}
		     <label for="drnote_date" class="col-sm-4 fsize">{% trans %}Dr Note Date{% endtrans %} :</label>
		   {% endif %}
		   <input type="text" class="form-control input-sm drcrnotedate" size="2" maxlength="2" placeholder="DD" id="drcrnote_date" accesskey="v">
                   <input type="text" class="form-control input-sm drcrnotedate" size="2" maxlength="2" placeholder="MM" id="drcrnote_month" accesskey="v">
                   <input type="text" class="form-control input-sm drcrnotedate" size="4" maxlength="4" placeholder="YYYY" id="drcrnote_year" accesskey="v">
                 </div>
		 <div class="form-group form-inline">
		   {% if drcrflag == "3" %}
		     <label class="col-sm-4 fsize" for="crnote_no">{% trans %}Dr Note No.{% endtrans %} :</label>
		   {% else %}
		     <label class="col-sm-4 fsize" for="drnote_no">{% trans %}Cr Note No.{% endtrans %} :</label>
		   {% endif %}
		   <input class="form-control input-sm col-sm-8" size="15" id="drcrnote_no" >
		 </div>
		 <div class="form-group form-inline">
		   {% if drcrflag == "3" %}
		     <label for="crnote_date" class="col-sm-4 fsize">{% trans %}Dr Note Date{% endtrans %} :</label>
		   {% else %}
		     <label for="drnote_date" class="col-sm-4 fsize">{% trans %}Cr Note Date{% endtrans %} :</label>
		   {% endif %}
		   <input type="text" class="form-control input-sm drcrnotedate" size="2" maxlength="2" placeholder="DD" id="drcrnote_date" accesskey="v">
                   <input type="text" class="form-control input-sm drcrnotedate" size="2" maxlength="2" placeholder="MM" id="drcrnote_month" accesskey="v">
                   <input type="text" class="form-control input-sm drcrnotedate" size="4" maxlength="4" placeholder="YYYY" id="drcrnote_year" accesskey="v">
                 </div>
               </div>
	       {#<***>#}
	       <div class="col-md-4 borderdiv">
		 {% if drcrflag == "3" %}
		   <h4>{% trans %}Details of Sale Invoice{% endtrans %} :</h4>
		 {% else %}
		   <h4>{% trans %}Details of Purchase Invoice{% endtrans %} :</h4>
		 {% endif %}
		 <div class="form-group form-inline">
		   {% if drcrflag=="3" %}
                     <label class="col-sm-4 fsize">{% trans %}State of Origin{% endtrans %} :</label>
		   {% else %}
		     <label class="col-sm-4 fsize">{% trans %}State of Destination{% endtrans %} :</label>
		   {% endif %}
		   <label class="col-sm-8 nopadding fsize" id="drcrnote_state" aria-describedby="statefordrcrnote"></label>
		 </div>
		 <div class="form-group form-inline">
		   <label class="col-sm-4 fsize" aria-describedby="statecodefordrcrnote">{% trans %}State Code{% endtrans %} :</label>
		   <label class="col-sm-8 nopadding fsize" id="statecodefordrcrnote"></label>
		 </div>
		 <div class="form-group form-inline">
		   <label class="col-sm-4 fsize" aria-describedby="drcrnote_issuer_name">{% trans %}Issuer's Name{% endtrans %} :</label>
		   <label class="col-sm-8 nopadding fsize" id="drcrnote_issuer_name"></label>
		 </div>
		 <div class="form-inline form-group">
		   <label class="col-sm-4 fsize" aria-describedby="drcrnote_issuer_designation">{% trans %}Designation{% endtrans %} :</label>
		   <label class="col-sm-8 nopadding fsize" id="drcrnote_issuer_designation"></label>
		 </div>
	       </div>
	       {#<***>#}
	       <div class="col-md-4 borderdiv">
		 {% if drcrflag == "3" %}
		   <h4>{% trans %}Details of Receiver | Billed to{% endtrans %} :</h4>
		 {% else %}
		   <h4>{% trans %}Details of Supplier{% endtrans %} :</h4>
		 {% endif %}
		 <div class="form-group form-inline">
		   <label class="col-sm-4 fsize" aria-describedby="drcrnote_custsupp">
		     {% if drcrflag=="3" %}
		       {% trans %}Customer{% endtrans %} :
		     {% else %}
		       {% trans %}Supplier{% endtrans %} :
		     {% endif %}
		   </label>
		   <label class="col-sm-8 nopadding fsize" id="drcrnote_custsupp"></label>
		 </div>
		 <div class="form-group form-inline">
		   <label aria-describedby="drcrnote_custsuppstate" class="col-sm-4 fsize">
		     {% if drcrflag == "3" %}
		       {% trans %}Customer State{% endtrans %}:
		     {% else %}
		       {% trans %}Supplier State{% endtrans %}:
		     {% endif %}
		   </label>
		   <label class="col-sm-8 nopadding fsize" id="drcrnote_custsuppstate"></label>
		 </div>
		 <div class="form-group form-inline">
		   <label aria-describedby="statecodeofcustsupp" class="col-sm-4 fsize">{% trans %}State Code{% endtrans %} :</label>
		   <label id="statecodeofcustsupp" class="col-sm-8 nopadding"></label>
		 </div>
		 <div class="form-group form-inline tinfield" hidden>
		   <label aria-describedby="tin" class="col-sm-4 fsize">{% trans %}TIN{% endtrans %} :</label>
		   <label type="text" id="tin" class="col-sm-8 nopadding"></label>
		 </div>
		 <div class="form-group form-inline gstinfield">
		   <label aria-describedby="gstin" class="col-sm-4 fsize">{% trans %}GSTIN{% endtrans %} :</label>
		   <label type="text" id="gstin" class="col-sm-8 nopadding" name="gstin" ></label>
		 </div>
		 <div class="form-group form-inline">
		   <label class="col-sm-4 fsize" for="drcrnote_custsuppaddr">
		     {% if drcrflag == "3" %}
		       {% trans %}Customer Address{% endtrans %} :
		     {% else %}
		       {% trans %}Supplier Address{% endtrans %} :
		     {% endif %}
		   </label>
		   <label class="col-sm-8 nopadding" id="drcrnote_custsuppaddr" ></label>
		 </div>
	       </div>
	     </div>
	     <a id="taxapplicablescroll"></a>
	     <div class="col-md-12">
	       <div class="col-md-3">
		 <label aria-describedby="taxapplicabletext" name="taxflag" >{% trans %}Tax Applicable{% endtrans %} : </label>
		   <label id="taxapplicabletext" ></label>
	       </div>
	       {#{% if drcrflag=="3" %}
	       <input type="hidden" id="status" value="3">
	       {% else %}
	       <input type="hidden" id="status" value="4">
	       {% endif %}#}
	     </div>
	     <div class="col-md-12">
	       {% if resultgstvat == '29' or resultgstvat == '22' %}
		 {% if resultgstvat == '22' %}
		   <div class="col-sm-12" style="margin-bottom:10px; padding:5;">
		     <small class="row col-sm-12 form-text text-muted">Use 'Ctrl + <' or 'Ctrl + >' to navigate horizontally and 'Shift + <' or 'Shift + >' to navigate vertically.</small>
		     <small class="row col-sm-12 form-text text-muted">Press 'Insert' key to save Debit/Credit Note. Press 'Esc' key to exit from the table.</small>
		   </div>
		   <table id="drcrnote_table_vat" class=" table table-condensed table-bordered fixed-table fixed-tablecrnote">
		 {% else %}
		     <div class="col-sm-12" style="margin-bottom:10px; padding:5;" id="vathelp" hidden>
		       <small class="row col-sm-12 form-text text-muted">Use 'Ctrl + <' or 'Ctrl + >' to navigate horizontally and 'Shift + <' or 'Shift + >' to navigate vertically.</small>
		       <small class="row col-sm-12 form-text text-muted">Press 'Insert' key to save Debit/Credit Note. Press 'Esc' key to exit from the table.</small>
		     </div>
		     <table id="drcrnote_table_vat" class=" table table-condensed table-bordered fixed-table fixed-tablecrnote" hidden>
		 {% endif %}
		 <thead class="bg-primary">
		   <tr>
		     <th class="mdvwrap text-center">{% trans %}Product{% endtrans %}</th>
		     <th class="qtyvwrap text-center">{% trans %}Billed Quantity{% endtrans %}</th>
		     <th class="smvwrap text-center">{% trans %}Rate{% endtrans %}</th>
		     <th class="smvwrap text-center">{% trans %}Discount Amount{% endtrans %}</th>
		     <th class="smvwrap text-center">{% trans %}Taxable Value{% endtrans %}</th>
		     <th class="ratewrap text-center">{% trans %}Tax Rate{% endtrans %} %</th>
		     <th class="smvwrap text-center">{% trans %}Tax Amount{% endtrans %}</th>
		     <th class="smvwrap text-center">{% trans %}Total{% endtrans %}</th>
		     <th class="crosswrap"></th>
		   </tr>
		 </thead>
		 <tbody>
		   <tr>
		     <td class="mdvwrap">
		       <label class="product_name_vat"></label>
		     </td>
		     <td class="qtyvwrap">
		       <div class="input-group">
			 <input type="text" class="drcrnote_product_quantity_vat form-control input-sm text-right numtype" value="0.00" placeholder="0.00" size="10" aria-describedby="unitaddon">
			 <span class="input-group-addon input-sm unitaddon"></span>
		       </div>
		     </td>
		     <td class="smvwrap">
		       <input type="text" class="drcrnote_product_per_price_vat form-control input-sm text-right numtype" value="0.00" placeholder="0.00" size="10">
		     </td>
		     <td class="smvwrap">
		       <input type="text" class="drcrnote_product_discount_vat form-control input-sm text-right numtype" value="0.00" placeholder="0.00" size="10">
		     </td>

		     <td class="smvwrap">
		       <input type="text" class="drcrnote_product_taxablevalue_vat form-control input-sm text-right numtype" value="0.00" placeholder="0.00" size="10" disabled>
		     </td>
		     <td class="ratewrap">
		       <input type="text" class="drcrnote_product_tax_rate_vat form-control input-sm text-right numtype" value="0.00" placeholder="0.00" size="10">
		     </td>
		     <td class="smvwrap">
		       <input  size="10" class="drcrnote_product_tax_amount_vat form-control text-right numtype"  value="0.00" placeholder="0.00" disabled>
		     </td>
		     <td class="smvwrap">
		       <input size="10" type="text" class="drcrnote_product_total form-control input-sm text-right numtype" value="0.00" placeholder="0.00" disabled>
		     </td>
		     <td class="crosswrap">
		     </td>
		   </tr>
		 </tbody>
		 <tfoot>
		   <tr>
		     <td colspan="4" class="text-right">
		       {% trans %}Total{% endtrans %}
		     </td>
		     <!--  Total : ptotal       -->
		     <td class="smvwrap">
		       <input type="text" id="discounttotal_product_vat" class=" form-control input-sm text-right" value="0.00" size="10" disabled>
		     </td>
		     <td class="smvwrap">
		       <input type="text" id="taxablevaluetotal_product_vat" class=" form-control input-sm text-right" value="0.00" size="10" disabled>
		     </td>
		     <td class="ratewrap">

		     </td>
		     <td class="smvwrap">
		       <input type="text" id="totaltax" class=" form-control input-sm text-right" value="0.00" size="10" disabled>
		     </td>
		     <td class="smvwrap">
		       <input type="text" id="total_product_vat" class=" form-control input-sm text-right" value="0.00" size="10" disabled>
		     </td>
		     <td class="crosswrap">

		     </td>
		   </tr>
		 </tfoot>

		     </table>
	       {% endif %}
	       {% if resultgstvat == '29' or resultgstvat == '7' %}
		 <div class="row col-sm-12" id="gstproducttable">
		   <div class="col-sm-12 bg-info" style="margin-bottom:10px; padding:10;">
		     <div class="row col-sm-12 text-primary">{% trans %}Please scroll horizontally to see all fields in this table.{% endtrans %}</div>
		     <small class="row col-sm-12 form-text text-muted">Use 'Ctrl + <' or 'Ctrl + >' to navigate horizontally and 'Shift + <' or 'Shift + >' to navigate vertically.</small>
		     <small class="row col-sm-12 form-text text-muted">Press 'Insert' key to save Debit/Credit Note. Press 'Esc' key to exit from the table.</small>
		   </div>
		   <div class="col-sm-10" style="overflow-x:scroll;">
		     <div class="row">
		       <table id="drcrnote_product_table_gst_heading" class="nopadding table table-condensed table-bordered" style="width:140%; max-width:140%">
			 <thead class="bg-primary">
			   <tr>
			     <th rowspan="2" class="mdwrap text-center">{% trans %}Product/ Service{% endtrans %}</th>
			     <th rowspan="2" class="smwrap text-center">{% trans %} HSN/ ACS Code{% endtrans %}</th>
			     <th rowspan="2" class="qtywrap text-center">{% trans %}Billed Quantity{% endtrans %}</th>
			     <th rowspan="2" class="smwrap text-center">{% trans %}Rate{% endtrans %}</th>
			     <th rowspan="2" class="smwrap text-center">{% trans %}Discount Amount{% endtrans %}</th>
			     <th rowspan="2" class="smwrap text-center">{% trans %}Taxable Value {% endtrans %}</th>
			     <th colspan="2" class="taxwrap text-center sgstfield">{% trans %}CGST{% endtrans %}</th>
			     <th colspan="2" class="taxwrap text-center sgstfield">{% trans %}SGST/UTGST{% endtrans %}</th>
			     <th colspan="2" class="taxwrap text-center igstfield">{% trans %}IGST{% endtrans %}</th>
			     <th colspan="2" class="taxwrap text-center">{% trans %}CESS{% endtrans %}</th>
			   </tr>

			   <tr>
			     <th class="sgstfield text-center">{% trans %}Rate{% endtrans %} %</th>
			     <th class="sgstfield text-center">{% trans %}Amount{% endtrans %}</th>
			     <th class="sgstfield text-center">{% trans %}Rate{% endtrans %} %</th>
			     <th class="sgstfield text-center">{% trans %}Amount{% endtrans %}</th>
			     <th class="igstfield text-center">{% trans %}Rate{% endtrans %} %</th>
			     <th class="igstfield text-center">{% trans %}Amount{% endtrans %}</th>
			     <th class="text-center">{% trans %}Rate{% endtrans %} %</th>
                             <th class="text-center">{% trans %}Amount{% endtrans %}</th>
			   </tr>
			 </thead>
		       </table>
		     </div>
		     <div class="row">
		       <table id="drcrnote_product_table_gst" class="nopadding table table-condensed table-bordered fixed-table fixed-tablecrnote" style="width:140%; max-width:140%; overflow-x:hidden;overflow-y:scroll;">
			 <tbody>
			   <tr>
			     <td class="mdwrap">
			       <label class="product_name_gst"></label>
			     </td>
			     <td class="smwrap text-center" style="vertical-align:middle;">
			       <label class="drcrnote_product_hsncode text-center"></label>
			     </td>
			     <td class="qtywrap">
			       <div class="input-group">
				 <input type="text" class="drcrnote_product_quantity_gst form-control input-sm text-right numtype" size="8" value="0.00" placeholder="0.00" aria-describedby="unitaddon">
				 <span class="input-group-addon input-sm unitaddon"></span>
			       </div>
			     </td>
			     <td class="smwrap">
			       <input type="text" class="drcrnote_product_per_price_gst form-control input-sm text-right numtype" size="9" value="0.00" placeholder="0.00">
			     </td>
			     <td class="smwrap">
			       <input type="text" class="drcrnote_product_discount_gst form-control input-sm text-right numtype" value="0.00" size="9" placeholder="0.00">
			     </td>
			     <td class="smwrap">
			       <input type="text" class="drcrnote_product_taxablevalue_gst form-control input-sm text-right numtype" value="0.00" size="9" placeholder="0.00" disabled>
			     </td>

			     <td class="taxcell sgstfield"><input type="text" class="drcrnote_product_cgstrate trate form-control input-sm text-right numtype" size="9" value="0.00" placeholder="0.00" disabled></td>
			     <td class="taxcell sgstfield"><input type="text" class="drcrnote_product_cgstamount tamount form-control input-sm text-right numtype" size="8" value="0.00" placeholder="0.00" disabled></td>

			     <td class="taxcell  sgstfield"><input type="text" class="drcrnote_product_sgstrate trate form-control input-sm text-right numtype" size="9" value="0.00" placeholder="0.00" disabled></td>
			     <td class="taxcell sgstfield"><input type="text" class="drcrnote_product_sgstamount tamount input-sm form-control text-right numtype" size="9" value="0.00" placeholder="0.00" disabled></td>

			     <td class="taxcell igstfield">
			       <input type="text" class="drcrnote_product_igstrate trate input-sm text-right form-control numtype" size="9" value="0.00" placeholder="0.00" disabled></td>
			       <td class="taxcell igstfield"><input type="text" class="drcrnote_product_igstamount tamount form-control input-sm text-right numtype" size="9" value="0.00" placeholder="0.00" disabled>
			       </td>
			       <td class="taxcell">
                                 <input type="text" class="drcrnote_product_cessrate trate input-sm text-right form-control numtype" size="9" value="0.00" placeholder="0.00" disabled></td>
                                 <td class="taxcell"><input type="text" class="drcrnote_product_cessamount tamount form-control input-sm text-right numtype" size="9" value="0.00" placeholder="0.00" disabled>
                                 </td>
                           </tr>
                         </tbody>
		       </table>
		     </div>
		     <div class="row">
		       <table id="drcrnote_product_table_gst_tfoot" class=" table table-condensed table-bordered fixed-table fixed-tablecrnote" style="width:140%; max-width:140%;">
			 <tfoot>
			   <tr>
			     <td colspan="5" class="text-right totalwrap" style="vertical-align:middle; font-size:75%">Total</td>
			     <td class="text-right smwrap">  <span id="discounttotal_product_gst" class="input-sm text-right" size="8"></span></td>
			     <td class="text-right smwrap"><span id="taxablevaluetotal_product_gst" class="input-sm text-right" size="8"></span></td>
			     <td colspan="2" class="text-right sgstfield taxwrap"><span id="totalcgst_product_gst" class="input-sm text-right" size="8"></span></td>

			     <td colspan="2" class="text-right sgstfield taxwrap"><span id="totalsgst_product_gst" class="input-sm text-right" size="8"></span></td>
			     <td colspan="2" class="text-right igstfield taxwrap" hidden><span id="totaligst_product_gst" class="input-sm text-right" size="8"></span></td>
			     <td colspan="2" class="text-right taxwrap"><span id="totalcess_product_gst" class="input-sm text-right" size="8"></span></td>
			 </tfoot>
		       </table>
		     </div>
		   </div>
		   <div class="col-sm-2 nopadding">
		     <table id="drcrnote_product_table_total" class="table table-condensed table-bordered fixed-table fixed-tablecrnote">
		       <thead>
			 <tr>
			   <th style="line-height:380% !important; text-align:center;" class="col-xs-8">Total</th>
			   <th class="col-xs-4"></th>
			 </tr>
		       </thead>
		       <tbody>
			 <tr>
			   <td class="col-xs-8"><input type="text" class="drcrnote_product_total form-control input-sm text-right numtype" value="0.00" size="14" placeholder="0.00" disabled></td>
			   <td class="col-xs-4 text-center">
			   </td>
			 </tr>
		       </tbody>
		       <tfoot>
			 <td class="col-xs-8 text-right">
			   <span id="total_product_gst" class="input-sm text-right" size="9"></span>
			 </td>
			 <td class="col-xs-4">

			 </td>
		       </tfoot>
		     </table>
		   </div>
		 </div>
	       {% endif %}
	     </div>
	     //
	   </form>
	 </div><!--End .container-fluid -->
       </div> <!--End .panel-body -->
     </div> <!--End .drcr_panel -->
   </div> <!--End .cantainer-fluid -->
   <script type="text/javascript" src="{{request.static_url('gkwebapp:static/js/adddrcrnote.js')}}"></script>
 </body>
</html>
